<NavigationLock OnBeforeInternalNavigation="OnBeforeInternalNavigation" />

<EditForm EditContext="editContext" OnValidSubmit="OnValidSubmit">

	<DataAnnotationsValidator />


	<MudAutocomplete T="InvProgramDTO"
					 Label=@Localizer["Program"]
					 Placeholder=@Localizer["SelectAProgram"]
					 SearchFunc="SearchProgram"
					 Value="selectedProgram"
					 ValueChanged="ProgramChanged"
					 ToStringFunc="@(e=> e==null?null : $"{e.Name}")">
		<ItemTemplate Context="itemContext">
			@itemContext.Name
		</ItemTemplate>
	</MudAutocomplete>

	<MudAutocomplete T="ProgramLot2DTO"
					 Label=@Localizer["Lot"]
					 Disabled="_disable"
					 Placeholder=@Localizer["SelectALot"]
					 SearchFunc="SearchLot"
					 Value="selectedLot"
					 ValueChanged="LotChanged"
					 ToStringFunc="@(e=> e==null?null : e.Lot!.Name)"
					 For="@(() => CourseProgramLotDTO.ProgramLot)">
		<ItemTemplate Context="itemContext">
			@itemContext.Lot!.Name 
		</ItemTemplate>
	</MudAutocomplete>

	<MudAutocomplete T="CourseDTO"
					 Label=@Localizer["Course"]
					 Placeholder=@Localizer["SelectACourse"]
					 SearchFunc="SearchCourse"
					 Value="selectedCourse"
					 ValueChanged="CourseChanged"
					 ToStringFunc="@(e=> e==null?null : $"{e.Name}")"
					 For="@(() => CourseProgramLotDTO.Course)">
		<ItemTemplate Context="itemContext">
			@itemContext.Code - @itemContext.Name
		</ItemTemplate>
	</MudAutocomplete>


	<MudDivider Class="my-2" DividerType="DividerType.Inset" />

	<MudButton Variant="Variant.Outlined"
			   StartIcon="@Icons.Material.Filled.ArrowBack"
			   Color="Color.Info"
			   OnClick="ReturnAction">
		@Localizer["Return"]
	</MudButton>

	<MudButton Variant="Variant.Outlined"
			   StartIcon="@Icons.Material.Filled.Check"
			   Color="Color.Primary"
			   ButtonType="ButtonType.Submit">
		@Localizer["SaveChanges"]
	</MudButton>
</EditForm>