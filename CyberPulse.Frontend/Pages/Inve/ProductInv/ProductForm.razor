<NavigationLock OnBeforeInternalNavigation="OnBeforeInternalNavigation" />

<EditForm EditContext="editContext" OnValidSubmit="OnValidSubmit">

	<DataAnnotationsValidator />
	<MudGrid>
		<MudItem xs="12" sm="2">
			<MudTextField Label="@Localizer["Unspsc"]"
							@bind-Value="@ProductDTO.Code"
							@onblur="() => CheckCodeExists(ProductDTO.Code)"
							For="@(() => ProductDTO.Code)"
							class="mb-3" />

		</MudItem>
		<MudItem xs="12" sm="5">
			<MudTextField Label="@Localizer["Name"]"
							@bind-Value="@ProductDTO.Name"
							For="@(() => ProductDTO.Name)"
							class="mb-3" />

		</MudItem>
		<MudItem xs="12" sm="5">
			<MudTextField Label="@Localizer["Description"]"
							@bind-Value="@ProductDTO.Description"
							For="@(() => ProductDTO.Description)"
							class="mb-3" />

		</MudItem>
		<MudItem xs="12">
			<MudAutocomplete T="Lot2DTO"
							 Label=@Localizer["Lot"]
							 Placeholder=@Localizer["SelectALot"]
							 SearchFunc="SearchLot"
							 Value="selectedLot"
							 ValueChanged="LotChanged"
							 ToStringFunc="@(e=> e==null?null : e.Name)"
							 For="@(() => ProductDTO.Lot)">
				<ItemTemplate Context="itemContext">
					@itemContext.Name
				</ItemTemplate>
			</MudAutocomplete>

		</MudItem>
		<MudItem xs="12">
			<MudAutocomplete T="SegmentDTO"
							 Label=@Localizer["Segment"]
							 Placeholder=@Localizer["SelectASegment"]
							 SearchFunc="SearchSegment"
							 Value="selectedSegment"
							 ValueChanged="SegmentChanged"
							 ToStringFunc="@(e=> e==null?null : e.Name)">
				<ItemTemplate Context="itemContext">
					@itemContext.Code - @itemContext.Name
				</ItemTemplate>
			</MudAutocomplete>

		</MudItem>
		<MudItem xs="12">
			<MudAutocomplete T="FamilyDTO"
							 Label=@Localizer["Family"]
							 Placeholder=@Localizer["SelectAFamily"]
							 SearchFunc="SearchFamily"
							 Value="selectedFamily"
							 ValueChanged="FamilyChanged"
							 ToStringFunc="@(e=> e==null?null : e.Name)">
				<ItemTemplate Context="itemContext">
					@itemContext.Code  -  @itemContext.Name
				</ItemTemplate>
			</MudAutocomplete>
		</MudItem>

		<MudItem xs="12">
			<MudAutocomplete T="Classe2DTO"
							 Label=@Localizer["Classe"]
							 Placeholder=@Localizer["SelectAClasse"]
							 SearchFunc="SearchClasse"
							 Value="selectedClasse"
							 ValueChanged="ClasseChanged"
							 ToStringFunc="@(e=> e==null?null : e.Name)"
							 For="@(() => ProductDTO.Classe)">
				<ItemTemplate Context="itemContext">
					@itemContext.Code - @itemContext.Name
				</ItemTemplate>
			</MudAutocomplete>
		</MudItem>
		<MudItem xs="12" sm="6">
			<MudAutocomplete T="UnitMeasurementDTO"
							 Label=@Localizer["UnitMeasurement"]
							 Placeholder=@Localizer["SelectAUnitMeasurement"]
							 SearchFunc="SearchUnitMeasurement"
							 Value="selectedUnitMeasurement"
							 ValueChanged="UnitMeasurementChanged"
							 ToStringFunc="@(e=> e==null?null : $"{e.Name}")"
							 For="@(() => ProductDTO.UnitMeasurement)">
				<ItemTemplate Context="itemContext">
					@itemContext.Name
				</ItemTemplate>
			</MudAutocomplete>
		</MudItem>
		<MudItem xs="12" sm="6">
			<MudAutocomplete T="StatuDTO"
							 Label=@Localizer["Statu"]
							 Disabled="_disable"
							 Placeholder=@Localizer["SelectAStatu"]
							 SearchFunc="SearchStatu"
							 Value="selectedStatu"
							 ValueChanged="StatuChanged"
							 ToStringFunc="@(e=> e==null?null : $"{e.Name}")"
							 For="@(() => ProductDTO.Statu)">

				<ItemTemplate Context="itemContext">
					@itemContext.Name
				</ItemTemplate>
			</MudAutocomplete>

		</MudItem>

	</MudGrid>



@* 	<MudAutocomplete T="BudgetTypeDTO"
					 Label=@Localizer["BudgetType"]
					 Placeholder=@Localizer["SelectABudgetType"]
					 SearchFunc="SearchBudgetType"
					 Value="selectedBudgetType"
					 ValueChanged="BudgetTypeChanged"
					 ToStringFunc="@(e=> e==null?null : $"{e.Name}")"
					 For="@(() => BudgetDTO.BudgetType)">
		<ItemTemplate Context="itemContext">
			@itemContext.Name
		</ItemTemplate>
	</MudAutocomplete>
 *@

	<MudDivider Class="my-2" DividerType="DividerType.Inset" />

	<MudButton Variant="Variant.Outlined"
			   StartIcon="@Icons.Material.Filled.ArrowBack"
			   Color="Color.Info"
			   OnClick="ReturnAction">
		@Localizer["Return"]
	</MudButton>

	<MudButton Variant="Variant.Outlined"
			   StartIcon="@Icons.Material.Filled.Check"
			   Color="Color.Primary"
			   ButtonType="ButtonType.Submit">
		@Localizer["SaveChanges"]
	</MudButton>
</EditForm>