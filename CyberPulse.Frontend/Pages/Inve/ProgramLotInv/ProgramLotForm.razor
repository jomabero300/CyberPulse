@if (loading)
{
	<Loading />
}
else
{
	<NavigationLock OnBeforeInternalNavigation="OnBeforeInternalNavigation" />
	<EditForm EditContext="editContext" OnValidSubmit="OnValidSubmit">
		<DataAnnotationsValidator />

		<MudGrid>

			<MudItem xs="12">
				<MudAutocomplete T="InvProgramDTO"
								 Label=@Localizer["Program"]
								 Placeholder=@Localizer["SelectAProgram"]
								 SearchFunc="SearchProgram"
								 Value="selectedProgram"
								 ValueChanged="ProgramChanged"
								 ToStringFunc="@(e=> e==null?null : $"{e.Name}")"
								 For="@(() => ProgramLotDTO.Program)">
					<ItemTemplate Context="itemContext">
						@itemContext.Name
					</ItemTemplate>
				</MudAutocomplete>
			</MudItem>

			<MudItem xs="12">
				<MudAutocomplete T="Lot2DTO"
								 Label=@Localizer["Lot"]
								 Placeholder=@Localizer["SelectALot"]
								 SearchFunc="SearchLot"
								 Value="selectedLot"
								 ValueChanged="LotChanged"
								 ToStringFunc="@(e=> e==null?null : $"{e.Name}")"
								 For="@(() => ProgramLotDTO.Lot)">
					<ItemTemplate Context="itemContext">
						@itemContext.Name
					</ItemTemplate>
				</MudAutocomplete>
			</MudItem>
		</MudGrid>


		<MudDivider Class="my-2" DividerType="DividerType.Inset" />

		<MudButton Variant="Variant.Outlined"
				   StartIcon="@Icons.Material.Filled.ArrowBack"
				   Color="Color.Info"
				   OnClick="ReturnAction">
			@Localizer["Return"]
		</MudButton>

		<MudButton Variant="Variant.Outlined"
				   StartIcon="@Icons.Material.Filled.Check"
				   Color="Color.Primary"
				   ButtonType="ButtonType.Submit">
			@Localizer["SaveChanges"]
		</MudButton>

	</EditForm>
}
